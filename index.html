<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mediamime</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Icons+Outlined">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/holistic/holistic.js"></script>
</head>
<body>
  <main class="preview-layout">
    <section class="preview-canvas">
      <div id="mediamime-sketch"></div>
      <div id="gesture-editor" class="gesture-editor" aria-label="Interactive score editor">
        <div id="gesture-toolbar" class="gesture-editor-toolbar" role="toolbar" aria-label="Editor tools">
          <button id="gesture-tool-select" class="is-active" type="button" data-tool="select" title="Select (V)" aria-label="Select (V)">
            <span class="material-icons-outlined" aria-hidden="true">near_me</span>
          </button>
          <button id="gesture-tool-hand" type="button" data-tool="hand" title="Pan (H)" aria-label="Pan (H)">
            <span class="material-icons-outlined" aria-hidden="true">pan_tool_alt</span>
          </button>
          <button id="gesture-tool-freehand" type="button" data-tool="freehand" title="Freehand (D)" aria-label="Freehand (D)">
            <span class="material-icons-outlined" aria-hidden="true">gesture</span>
          </button>
          <button id="gesture-tool-line" type="button" data-tool="line" title="Line (L)" aria-label="Line (L)">
            <span class="material-icons-outlined" aria-hidden="true">timeline</span>
          </button>
          <button id="gesture-tool-rect" type="button" data-tool="rect" title="Rectangle (R)" aria-label="Rectangle (R)">
            <span class="material-icons-outlined" aria-hidden="true">crop_square</span>
          </button>
          <button id="gesture-tool-ellipse" type="button" data-tool="ellipse" title="Oval (O)" aria-label="Oval (O)">
            <span class="material-icons-outlined" aria-hidden="true">radio_button_unchecked</span>
          </button>
          <button id="gesture-tool-eraser" type="button" data-tool="eraser" title="Eraser (E)" aria-label="Eraser (E)">
            <span class="material-symbols-outlined" aria-hidden="true">ink_eraser</span>
          </button>
          <div class="toolbar-divider" aria-hidden="true"></div>
          <button id="gesture-mode-toggle" type="button" title="Toggle perform mode" aria-label="Toggle perform mode">
            <span class="material-icons-outlined" aria-hidden="true">play_circle</span>
          </button>
          <button id="gesture-clear" type="button" title="Clear all shapes" aria-label="Clear all shapes">
            <span class="material-icons-outlined" aria-hidden="true">delete_sweep</span>
          </button>
        </div>
        <div class="gesture-svg-wrapper">
          <svg id="gesture-svg" class="gesture-svg" tabindex="0" role="presentation" aria-label="Score canvas" viewBox="0 0 1280 720" preserveAspectRatio="xMidYMid meet"></svg>
        </div>
      </div>
      <video id="mediamime-video" muted></video>
    </section>
        <div id="modal-layer" class="floating-modal-layer">
      <section id="modal-input" class="panel floating-modal is-open is-hidden" role="dialog" aria-modal="false" aria-label="Input panel" aria-hidden="true" data-modal="input" data-resizable="true" tabindex="-1">
        <div class="modal-chrome">
          <div class="modal-handle" data-modal-handle aria-label="Move Input panel" tabindex="0">
            <span class="material-icons-outlined" aria-hidden="true">drag_indicator</span>
          </div>
          <div class="panel-actions">
            <button id="input-add-camera" type="button" class="icon-button" title="Add camera input" aria-label="Add camera input">
              <span class="material-icons-outlined" aria-hidden="true">videocam</span>
            </button>
            <button id="input-add-video" type="button" class="icon-button" title="Add video input" aria-label="Add video input">
              <span class="material-icons-outlined" aria-hidden="true">video_library</span>
            </button>
            <button id="input-add-url" type="button" class="icon-button" title="Add media by URL" aria-label="Add media by URL">
              <span class="material-icons-outlined" aria-hidden="true">link</span>
            </button>
            <button type="button" class="icon-button panel-close" data-modal-close="input" title="Hide Input panel" aria-label="Hide Input panel">
              <span class="material-icons-outlined" aria-hidden="true">close</span>
            </button>
          </div>
        </div>
        <div class="panel-content">
          <div class="panel-section is-active" data-panel-section="inputs" id="panel-inputs" role="tabpanel" aria-label="Input sources">
            <div class="input-source-list" id="input-source-list" role="list" aria-label="Input sources">
              <!-- Input sources will be dynamically added here -->
            </div>
            <div class="input-empty" id="input-empty">
              Click <strong>+</strong> to add a camera or video input
            </div>
            <div class="input-detail" id="input-detail" hidden>
              <div class="input-detail-form">
                <div class="assignment-row">
                  <label>Name</label>
                  <input type="text" id="input-source-name" placeholder="Input name">
                </div>
                <div class="assignment-row">
                  <label>Type</label>
                  <span class="status-chip" id="input-source-type">Camera</span>
                </div>
                <div class="assignment-row assignment-row--name">
                  <label>Preview</label>
                  <div class="input-preview-wrapper">
                    <video id="input-preview-video" class="input-preview-video" autoplay muted playsinline></video>
                    <canvas id="input-preview-canvas" width="320" height="180" aria-label="Input preview"></canvas>
                  </div>
                </div>
                <div class="assignment-row" id="input-transport-row">
                  <label>Transport</label>
                  <div class="input-transport-controls">
                    <button type="button" id="input-transport-toggle" class="icon-button" disabled title="Play/Pause" aria-label="Play/Pause">
                      <span class="material-icons-outlined" aria-hidden="true">play_arrow</span>
                    </button>
                    <label class="input-transport-scrubber">
                      <span class="sr-only">Scrub</span>
                      <input type="range" id="input-transport-scrub" min="0" max="1" step="0.0005" value="0" disabled aria-label="Timeline scrubber">
                      <span id="input-transport-time">0:00</span>
                    </label>
                    <div class="input-transport-speed">
                      <input
                        type="number"
                        id="input-transport-speed"
                        min="-10"
                        max="10"
                        step="0.25"
                        value="1"
                        disabled
                        aria-label="Playback speed"
                        title="Playback speed (negative = reverse; 0 pauses)"
                        inputmode="decimal"
                      >
                      <span id="input-transport-speed-value" aria-hidden="true">1Ã—</span>
                    </div>
                  </div>
                </div>
                <div class="assignment-row">
                  <label>Crop</label>
                  <div class="assignment-field-group assignment-field-group--compact">
                    <div class="field-compact small">
                      <span>X</span>
                      <input type="number" id="input-crop-x" step="0.01" value="0" min="0" max="1" inputmode="decimal" aria-label="Crop X">
                    </div>
                    <div class="field-compact small">
                      <span>Y</span>
                      <input type="number" id="input-crop-y" step="0.01" value="0" min="0" max="1" inputmode="decimal" aria-label="Crop Y">
                    </div>
                    <div class="field-compact small">
                      <span>W</span>
                      <input type="number" id="input-crop-w" step="0.01" value="1" min="0" max="1" inputmode="decimal" aria-label="Crop Width">
                    </div>
                    <div class="field-compact small">
                      <span>H</span>
                      <input type="number" id="input-crop-h" step="0.01" value="1" min="0" max="1" inputmode="decimal" aria-label="Crop Height">
                    </div>
                  </div>
                </div>
                <div class="assignment-row">
                  <label>Flip</label>
                  <div class="assignment-field-group assignment-field-group--compact">
                    <label class="stream-toggle" title="Flip horizontal">
                      <input type="checkbox" id="input-flip-horizontal" aria-label="Flip horizontal">
                      <span class="material-icons-outlined" aria-hidden="true">sync_alt</span>
                    </label>
                    <label class="stream-toggle" title="Flip vertical">
                      <input type="checkbox" id="input-flip-vertical" aria-label="Flip vertical">
                      <span class="material-icons-outlined" aria-hidden="true">swap_vert</span>
                    </label>
                  </div>
                </div>
                <!-- Delete action moved to the input list row as an icon button -->
                <div class="input-subpanel">
                  <div class="input-subpanel-header">
                    <div>
                      <strong id="input-bookmark-title">Media bookmarks & sample clip</strong>
                      <p class="input-hint">Store frequently used URLs or load the built-in sample clip.</p>
                    </div>
                    <button type="button" id="input-load-sample" class="pill-button small">
                      <span class="material-icons-outlined" aria-hidden="true">movie</span>
                      <span>Sample clip</span>
                    </button>
                  </div>
                  <label for="input-url-field" class="input-hint">Add media URL</label>
                  <div class="input-url-field">
                    <input type="url" id="input-url-field" placeholder="https://example.com/video.mp4" autocomplete="off">
                    <button type="button" id="input-url-add" class="pill-button small">
                      <span class="material-icons-outlined" aria-hidden="true">library_add</span>
                      <span>Add</span>
                    </button>
                  </div>
                  <p id="input-url-message" class="input-hint" role="status" aria-live="polite"></p>
                  <div class="input-url-bookmarks" id="input-url-bookmarks" role="list"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
  <section id="modal-layers" class="panel floating-modal is-open is-hidden" role="dialog" aria-modal="false" aria-label="Layers panel" aria-hidden="true" data-modal="layers" data-resizable="true" tabindex="-1">
        <div class="modal-chrome">
          <div class="modal-handle" data-modal-handle aria-label="Move Layers panel" tabindex="0">
            <span class="material-icons-outlined" aria-hidden="true">drag_indicator</span>
          </div>
          <div class="panel-actions">
              <button type="button" class="icon-button" id="layer-add-stream" title="Add stream" aria-label="Add stream">
                <span class="material-icons-outlined" aria-hidden="true">add</span>
              </button>
              <button type="button" class="icon-button" id="layer-duplicate-stream" disabled title="Duplicate stream" aria-label="Duplicate stream">
                <span class="material-icons-outlined" aria-hidden="true">content_copy</span>
              </button>
              <button id="mediamime-reset" class="icon-button" title="Reset overlays" aria-label="Reset overlays">
              <span class="material-icons-outlined" aria-hidden="true">refresh</span>
            </button>
            <button type="button" class="icon-button panel-close" data-modal-close="layers" title="Hide Layers panel" aria-label="Hide Layers panel">
              <span class="material-icons-outlined" aria-hidden="true">close</span>
            </button>
          </div>
        </div>
        <div class="panel-content">
          <div class="panel-section is-active" data-panel-section="streams" id="panel-streams" role="tabpanel" aria-label="Stream controls">
            <div class="layers-panel" id="layers-panel">
              <div class="layers-panel-body">
                <div class="layers-stream-list" id="layer-stream-list" role="listbox" aria-label="Streams"></div>
                <div class="layers-empty" id="layer-empty">
                  Add a stream to forward a camera or video input through processing layers. Duplicate streams to reuse the same source in different score regions.
                </div>
                <form class="layers-detail" id="layer-detail" autocomplete="off" aria-live="polite">
                  <div class="assignment-row assignment-row--name">
                    <label for="layer-stream-name">
                      Name
                      <button type="button" id="layer-stream-enabled-toggle" class="icon-button" aria-pressed="true" title="Disable stream" aria-label="Disable stream">
                        <span class="material-icons-outlined" aria-hidden="true">toggle_on</span>
                      </button>
                      <button type="button" id="layer-stream-preview-toggle" class="icon-button is-active" aria-pressed="true" title="Hide in Preview" aria-label="Hide in preview panel">
                        <span class="material-icons-outlined" aria-hidden="true">visibility</span>
                      </button>
                      <button type="button" id="layer-stream-main-toggle" class="icon-button is-active" aria-pressed="true" title="Hide in main view" aria-label="Hide on main canvas">
                        <span class="material-icons-outlined" aria-hidden="true">grid_on</span>
                      </button>
                    </label>
                    <div class="assignment-field-group assignment-field-group--name">
                      <input type="text" id="layer-stream-name" placeholder="Stream name">
                      <div class="color-chip-wrapper" data-color-picker="layers">
                        <button type="button" class="color-chip" id="layer-color-chip" data-color-toggle="layers" aria-haspopup="true" aria-expanded="false" aria-label="Pick stream color"></button>
                        <div class="color-picker-panel" id="layer-color-panel" data-color-panel="layers" hidden>
                              <div class="rgba-picker" data-rgba-picker="layers">
                                <div class="rgba-picker-preview" aria-live="polite">
                                  <span class="rgba-picker-preview-swatch" aria-hidden="true"></span>
                                  <output class="rgba-picker-preview-value" data-rgba-output>rgba(255, 255, 255, 0)</output>
                                </div>
                                <div class="rgba-picker-workspace">
                                  <div class="rgba-picker-spectrum" data-rgba-spectrum>
                                    <div class="rgba-picker-spectrum-cursor" data-rgba-spectrum-cursor aria-hidden="true"></div>
                                  </div>
                                  <div class="rgba-picker-slider-stack">
                                    <div class="rgba-picker-slider" data-rgba-hue role="slider" aria-label="Hue" aria-valuemin="0" aria-valuemax="360" aria-valuenow="0">
                                      <div class="rgba-picker-slider-track"></div>
                                      <div class="rgba-picker-slider-thumb"></div>
                                    </div>
                                    <div class="rgba-picker-slider rgba-picker-slider--alpha" data-rgba-alpha role="slider" aria-label="Alpha" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                                      <div class="rgba-picker-slider-track"></div>
                                      <div class="rgba-picker-slider-thumb"></div>
                                    </div>
                                  </div>
                                </div>
                            <div class="rgba-picker-inputs">
                              <label class="rgba-picker-field">
                                <span>R</span>
                                <input type="number" min="0" max="255" data-rgba-channel="r" inputmode="numeric" aria-label="Red value">
                              </label>
                              <label class="rgba-picker-field">
                                <span>G</span>
                                <input type="number" min="0" max="255" data-rgba-channel="g" inputmode="numeric" aria-label="Green value">
                              </label>
                              <label class="rgba-picker-field">
                                <span>B</span>
                                <input type="number" min="0" max="255" data-rgba-channel="b" inputmode="numeric" aria-label="Blue value">
                              </label>
                              <label class="rgba-picker-field">
                                <span>A%</span>
                                <input type="number" min="0" max="100" data-rgba-channel="a" inputmode="numeric" aria-label="Alpha percentage">
                              </label>
                              <label class="rgba-picker-field rgba-picker-field--hex">
                                <span>Hex</span>
                                <input type="text" data-rgba-hex inputmode="text" aria-label="Hex color">
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="assignment-row">
                    <label for="layer-stream-source">Source</label>
                    <select id="layer-stream-source">
                      <option value="">No sources available</option>
                    </select>
                  </div>
                  <div class="assignment-row">
                    <label for="layer-stream-process">Process</label>
                    <select id="layer-stream-process"></select>
                  </div>
                  <div class="assignment-row">
                    <label>Viewport</label>
                    <div class="assignment-field-group assignment-field-group--compact">
                      <div class="field-compact small">
                        <span>X</span>
                        <input type="number" step="0.01" id="layer-viewport-x" value="0">
                      </div>
                      <div class="field-compact small">
                        <span>Y</span>
                        <input type="number" step="0.01" id="layer-viewport-y" value="0">
                      </div>
                      <div class="field-compact small">
                        <span>W</span>
                        <input type="number" step="0.01" min="0.01" id="layer-viewport-w" value="1">
                      </div>
                      <div class="field-compact small">
                        <span>H</span>
                        <input type="number" step="0.01" min="0.01" id="layer-viewport-h" value="1">
                      </div>
                    </div>
                    <div class="layers-viewport-controls">
                      <input type="checkbox" id="layer-viewport-fit" class="sr-only" checked aria-hidden="true" tabindex="-1">
                      <button type="button" class="icon-button" id="layer-viewport-fit-toggle" title="Fit to score viewport" aria-label="Fit to score viewport" aria-pressed="true">
                        <span class="material-icons-outlined" aria-hidden="true">crop_free</span>
                      </button>
                      <button type="button" class="icon-button" id="layer-fit-viewport" title="Reset viewport" aria-label="Reset viewport">
                        <span class="material-icons-outlined" aria-hidden="true">center_focus_strong</span>
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
            
            </div>
          </div>
      </section>
      <section id="modal-map" class="panel floating-modal is-open is-hidden" role="dialog" aria-modal="false" aria-label="Map panel" aria-hidden="true" data-modal="map" tabindex="-1">
        <div class="modal-chrome">
          <div class="modal-handle" data-modal-handle aria-label="Move Map panel" tabindex="0">
            <span class="material-icons-outlined" aria-hidden="true">drag_indicator</span>
          </div>
          <div class="panel-actions">
            <button id="snapshot-import-button" type="button" class="icon-button" title="Import score from JSON" aria-label="Import score from JSON">
              <span class="material-icons-outlined" aria-hidden="true">file_upload</span>
            </button>
            <button id="snapshot-append-button" type="button" class="icon-button" title="Append score from JSON" aria-label="Append score from JSON">
              <span class="material-icons-outlined" aria-hidden="true">playlist_add</span>
            </button>
            <button id="snapshot-export-button" type="button" class="icon-button" title="Export score to JSON" aria-label="Export score to JSON">
              <span class="material-icons-outlined" aria-hidden="true">file_download</span>
            </button>
            <button id="snapshot-export-svg-button" type="button" class="icon-button" title="Export score as SVG" aria-label="Export score as SVG">
              <span class="material-icons-outlined" aria-hidden="true">image</span>
            </button>
            <button
              type="button"
              class="icon-button editor-panel-tip"
              role="note"
              tabindex="0"
              aria-label="Draw a shape to begin. Select it to edit MIDI mappings."
              data-tip="Draw a shape to begin. Select it to edit MIDI mappings."
              title="Help">
              <span class="material-icons-outlined" aria-hidden="true">info</span>
            </button>
            <button type="button" class="icon-button panel-close" data-modal-close="map" title="Hide Map panel" aria-label="Hide Map panel">
              <span class="material-icons-outlined" aria-hidden="true">close</span>
            </button>
          </div>
        </div>
        <div class="panel-content">
            <div class="panel-section is-active" data-panel-section="editor" id="panel-editor" role="tabpanel" aria-label="Score editor">
              <input id="snapshot-import-input" type="file" accept="application/json" hidden>
              <div class="editor-panel">
                <div class="editor-panel-header">
                </div>
                <div class="editor-shape-list" id="editor-shape-list" role="listbox" aria-label="Score elements"></div>
                <div class="editor-detail" id="editor-detail">
                  <div class="editor-detail-empty" id="editor-detail-empty">
                    .
                  </div>
                  <form id="editor-detail-form" class="editor-detail-form assignment-body" autocomplete="off">
                    <div class="assignment-row assignment-row--name">
                      <label for="editor-shape-name">
                        Name
                        <button type="button" id="editor-shape-enabled-toggle" class="icon-button" aria-pressed="true" title="Disable shape" aria-label="Disable shape">
                          <span class="material-icons-outlined" aria-hidden="true">toggle_on</span>
                        </button>
                      </label>
                      <div class="assignment-field-group assignment-field-group--name">
                        <input id="editor-shape-name" type="text" name="editorShapeName" placeholder="Untitled shape">
                        <div class="color-chip-wrapper" data-color-picker="editor">
                          <button type="button" class="color-chip" data-color-toggle="editor" aria-haspopup="true" aria-expanded="false" aria-label="Pick shape color"></button>
                          <div class="color-picker-panel" data-color-panel="editor" hidden>
                            <div class="rgba-picker" data-rgba-picker="editor">
                              <div class="rgba-picker-preview" aria-live="polite">
                                <span class="rgba-picker-preview-swatch" aria-hidden="true"></span>
                                <output class="rgba-picker-preview-value" data-rgba-output>rgba(255, 255, 255, 0.5)</output>
                              </div>
                              <div class="rgba-picker-workspace">
                                <div class="rgba-picker-spectrum" data-rgba-spectrum>
                                  <div class="rgba-picker-spectrum-cursor" data-rgba-spectrum-cursor aria-hidden="true"></div>
                                </div>
                                <div class="rgba-picker-slider-stack">
                                  <div class="rgba-picker-slider" data-rgba-hue role="slider" aria-label="Hue" aria-valuemin="0" aria-valuemax="360" aria-valuenow="0">
                                    <div class="rgba-picker-slider-track"></div>
                                    <div class="rgba-picker-slider-thumb"></div>
                                  </div>
                                  <div class="rgba-picker-slider rgba-picker-slider--alpha" data-rgba-alpha role="slider" aria-label="Alpha" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50">
                                    <div class="rgba-picker-slider-track"></div>
                                    <div class="rgba-picker-slider-thumb"></div>
                                  </div>
                                </div>
                              </div>
                              <div class="rgba-picker-inputs">
                                <label class="rgba-picker-field">
                                  <span>R</span>
                                  <input type="number" min="0" max="255" data-rgba-channel="r" inputmode="numeric" aria-label="Red value">
                                </label>
                                <label class="rgba-picker-field">
                                  <span>G</span>
                                  <input type="number" min="0" max="255" data-rgba-channel="g" inputmode="numeric" aria-label="Green value">
                                </label>
                                <label class="rgba-picker-field">
                                  <span>B</span>
                                  <input type="number" min="0" max="255" data-rgba-channel="b" inputmode="numeric" aria-label="Blue value">
                                </label>
                                <label class="rgba-picker-field">
                                  <span>A%</span>
                                  <input type="number" min="0" max="100" data-rgba-channel="a" inputmode="numeric" aria-label="Alpha percentage">
                                </label>
                                <label class="rgba-picker-field rgba-picker-field--hex">
                                  <span>Hex</span>
                                  <input type="text" data-rgba-hex inputmode="text" aria-label="Hex color">
                                </label>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="assignment-row">
                      <label for="editor-shape-midi">MIDI</label>
                      <div class="assignment-field-group assignment-field-group--compact">
                        <select id="editor-shape-midi">
                          <option value="broadcast">All Outputs</option>
                        </select>
                        <button id="editor-shape-midi-refresh" type="button" class="icon-button" title="Refresh MIDI ports" aria-label="Refresh MIDI ports">
                          <span class="material-icons-outlined" aria-hidden="true">refresh</span>
                        </button>
                      </div>
                    </div>
                    <div class="assignment-row assignment-row--split">
                      <label for="editor-stream-select">Input</label>
                      <div class="assignment-field-group">
                        <select id="editor-stream-select">
                          <option value="pose">Pose Landmarks</option>
                          <option value="leftHand">Left Hand</option>
                          <option value="rightHand">Right Hand</option>
                          <option value="face">Face (centroid)</option>
                          <option value="pointer">Pointer Input</option>
                          <option value="keyboard">Keyboard</option>
                        </select>
                        <select id="editor-landmark-select"></select>
                      </div>
                    </div>
                    <div class="assignment-events">
                      <div class="event-list-header">
                        <span>Events</span>
                        <button type="button" id="editor-add-event" class="icon-button" title="Add event" aria-label="Add event">
                          <span class="material-icons-outlined" aria-hidden="true">add</span>
                        </button>
                      </div>
                      <div id="editor-event-list" class="event-list" role="list"></div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section id="modal-preview" class="panel floating-modal is-open" role="dialog" aria-modal="false" aria-label="Preview panel" data-modal="preview" data-resizable="true" tabindex="-1">
        <div class="modal-chrome">
          <div class="modal-handle" data-modal-handle aria-label="Move Preview panel" tabindex="0">
            <span class="material-icons-outlined" aria-hidden="true">drag_indicator</span>
          </div>
          <div class="panel-actions">
            <button type="button" class="icon-button panel-close" data-modal-close="preview" title="Hide Preview panel" aria-label="Hide Preview panel">
              <span class="material-icons-outlined" aria-hidden="true">close</span>
            </button>
          </div>
        </div>
        <div class="floating-modal-body">
          <div class="segment-preview" aria-hidden="false">
            <canvas id="segmentation-preview" width="320" height="180"></canvas>
          </div>
        </div>
      </section>
    </div>
  </main>
  <div id="assignment-backdrop" class="modal-backdrop" aria-hidden="true"></div>
  <div id="assignment-modal" class="assignment-modal panel" role="dialog" aria-modal="true" aria-labelledby="assignment-modal-title" aria-hidden="true">
    <div class="modal-chrome assignment-chrome">
      <div class="modal-handle assignment-handle" data-assignment-handle aria-label="Move mapping dialog" tabindex="0">
        <span class="material-icons-outlined" aria-hidden="true" title="Use the tracked input to trigger MIDI actions">music_note</span>
        <span id="assignment-modal-title" class="visually-hidden">Mapping</span>
      </div>
      <div class="modal-actions">
        <button id="assignment-modal-close" class="icon-button" type="button" title="Close mapping dialog" aria-label="Close mapping dialog">
          <span class="material-icons-outlined" aria-hidden="true">close</span>
        </button>
      </div>
    </div>
    <div class="assignment-body">
      <div class="assignment-row assignment-row--name">
        <label for="assignment-shape-name">Name</label>
        <div class="assignment-field-group assignment-field-group--name">
          <input id="assignment-shape-name" type="text" name="shapeName" placeholder="Untitled shape">
          <div class="color-chip-wrapper" data-color-picker="assignment">
            <button type="button" class="color-chip" data-color-toggle="assignment" aria-haspopup="true" aria-expanded="false" aria-label="Pick shape color"></button>
            <div class="color-picker-panel" data-color-panel="assignment" hidden>
              <div class="rgba-picker" data-rgba-picker="assignment">
                <div class="rgba-picker-preview" aria-live="polite">
                  <span class="rgba-picker-preview-swatch" aria-hidden="true"></span>
                  <output class="rgba-picker-preview-value" data-rgba-output>rgba(255, 255, 255, 0.5)</output>
                </div>
                <div class="rgba-picker-workspace">
                  <div class="rgba-picker-spectrum" data-rgba-spectrum>
                    <div class="rgba-picker-spectrum-cursor" data-rgba-spectrum-cursor aria-hidden="true"></div>
                  </div>
                  <div class="rgba-picker-slider-stack">
                    <div class="rgba-picker-slider" data-rgba-hue role="slider" aria-label="Hue" aria-valuemin="0" aria-valuemax="360" aria-valuenow="0">
                      <div class="rgba-picker-slider-track"></div>
                      <div class="rgba-picker-slider-thumb"></div>
                    </div>
                    <div class="rgba-picker-slider rgba-picker-slider--alpha" data-rgba-alpha role="slider" aria-label="Alpha" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50">
                      <div class="rgba-picker-slider-track"></div>
                      <div class="rgba-picker-slider-thumb"></div>
                    </div>
                  </div>
                </div>
                <div class="rgba-picker-inputs">
                  <label class="rgba-picker-field">
                    <span>R</span>
                    <input type="number" min="0" max="255" data-rgba-channel="r" inputmode="numeric" aria-label="Red value">
                  </label>
                  <label class="rgba-picker-field">
                    <span>G</span>
                    <input type="number" min="0" max="255" data-rgba-channel="g" inputmode="numeric" aria-label="Green value">
                  </label>
                  <label class="rgba-picker-field">
                    <span>B</span>
                    <input type="number" min="0" max="255" data-rgba-channel="b" inputmode="numeric" aria-label="Blue value">
                  </label>
                  <label class="rgba-picker-field">
                    <span>A%</span>
                    <input type="number" min="0" max="100" data-rgba-channel="a" inputmode="numeric" aria-label="Alpha percentage">
                  </label>
                  <label class="rgba-picker-field rgba-picker-field--hex">
                    <span>Hex</span>
                    <input type="text" data-rgba-hex inputmode="text" aria-label="Hex color">
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="assignment-row">
        <label for="assignment-midi-port">MIDI</label>
        <div class="assignment-field-group assignment-field-group--compact">
          <select id="assignment-midi-port">
            <option value="broadcast">All Outputs</option>
          </select>
          <button id="assignment-midi-port-refresh" type="button" class="icon-button" title="Refresh MIDI ports" aria-label="Refresh MIDI ports">
            <span class="material-icons-outlined" aria-hidden="true">refresh</span>
          </button>
        </div>
      </div>
      <div class="assignment-row assignment-row--split">
        <label for="assignment-stream">Input</label>
        <div class="assignment-field-group">
          <select id="assignment-stream">
            <option value="pose">Pose Landmarks</option>
            <option value="leftHand">Left Hand</option>
            <option value="rightHand">Right Hand</option>
            <option value="face">Face (centroid)</option>
            <option value="pointer">Pointer Input</option>
            <option value="keyboard">Keyboard</option>
          </select>
          <select id="assignment-landmark"></select>
        </div>
      </div>
      <div class="assignment-events">
        <div class="event-list-header">
          <span>Events</span>
          <button type="button" id="assignment-add-event" class="icon-button" title="Add event" aria-label="Add event">
            <span class="material-icons-outlined" aria-hidden="true">add</span>
          </button>
        </div>
        <div id="assignment-event-list" class="event-list" role="list"></div>
      </div>
    </div>
  </div>

  <script type="module" src="./scripts/app.js"></script>
</body>
</html>
    
